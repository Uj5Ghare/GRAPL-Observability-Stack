[SERVICE]
    flush                  5
    log_level              info
    daemon                 off
    parsers_file           parsers.conf

# on-prem-prod
[INPUT]
    name                   tail
    tag                    on-prem-out_logs
    path                   /home/ubuntu/.pm2/logs/on-prem-out.log
    refresh_interval       5
    rotate_wait            30
    mem_buf_limit          50MB
    skip_long_lines        On
    parser                 json
    read_from_head         true

[INPUT]
    name                   tail
    tag                    on-prem-error_logs
    path                   /home/ubuntu/.pm2/logs/on-prem-error.log
    refresh_interval       5
    rotate_wait            30
    mem_buf_limit          50MB
    skip_long_lines        On
    parser                 json
    read_from_head         true

[OUTPUT]
    name                    loki
    match                   on-prem-out_logs
    host                    <host-ip>
    port                    3100
    labels                  log=out_logs, service=on-prem, env=prod, host=on-prem-prod
    auto_kubernetes_labels  off
    workers                 2

[OUTPUT]
    name                    loki
    match                   on-prem-error_logs
    host                    <host-ip>
    port                    3100
    labels                  log=error_logs, service=on-prem, env=prod, host=on-prem-prod
    auto_kubernetes_labels  off
    workers                 2

# remote-api-preprod
[INPUT]
    name                   tail
    tag                    remote-api-preprod-out_logs
    path                   /home/ubuntu/.pm2/logs/remote-api-out.log
    refresh_interval       5
    rotate_wait            30
    mem_buf_limit          50MB
    skip_long_lines        On
    parser                 json
    read_from_head         true

[INPUT]
    name                   tail
    tag                    remote-api-preprod-error_logs
    path                   /home/ubuntu/.pm2/logs/remote-api-error.log
    refresh_interval       5
    rotate_wait            30
    mem_buf_limit          50MB
    skip_long_lines        On
    parser                 json
    read_from_head         true

[OUTPUT]
    name                    loki
    match                   remote-api-preprod-out_logs
    host                    <host-ip>
    port                    3100
    labels                  log=out_logs, service=remote-api, env=preprod, host=remote-api-preprod
    auto_kubernetes_labels  off
    workers                 2

[OUTPUT]
    name                    loki
    match                   remote-api-preprod-error_logs
    host                    <host-ip>
    port                    3100
    labels                  log=error_logs, service=remote-api, env=preprod, host=remote-api-preprod
    auto_kubernetes_labels  off
    workers                 2


# remote-api-staging
[INPUT]
    name                   tail
    tag                    remote-api-staging-out_logs
    path                   /home/ubuntu/.pm2/logs/remote-api-out.log
    refresh_interval       5
    rotate_wait            30
    mem_buf_limit          50MB
    skip_long_lines        On
    parser                 json
    read_from_head         true

[INPUT]
    name                   tail
    tag                    remote-api-staging-error_logs
    path                   /home/ubuntu/.pm2/logs/remote-api-error.log
    refresh_interval       5
    rotate_wait            30
    mem_buf_limit          50MB
    skip_long_lines        On
    parser                 json
    read_from_head         true

[OUTPUT]
    name                    loki
    match                   remote-api-staging-out_logs
    host                    <host-ip>
    port                    3100
    labels                  log=out_logs, service=remote-api, env=staging, host=remote-api-staging
    auto_kubernetes_labels  off
    workers                 2

[OUTPUT]
    name                    loki
    match                   remote-api-staging-error_logs
    host                    <host-ip>
    port                    3100
    labels                  log=error_logs, service=remote-api, env=staging, host=remote-api-staging
    auto_kubernetes_labels  off
    workers                 2


# remote-api-uat
[INPUT]
    name                   tail
    tag                    remote-api-uat-out_logs
    path                   /home/ubuntu/.pm2/logs/remote-api-out.log
    refresh_interval       5
    rotate_wait            30
    mem_buf_limit          50MB
    skip_long_lines        On
    parser                 json
    read_from_head         true

[INPUT]
    name                   tail
    tag                    remote-api-uat-error_logs
    path                   /home/ubuntu/.pm2/logs/remote-api-error.log
    refresh_interval       5
    rotate_wait            30
    mem_buf_limit          50MB
    skip_long_lines        On
    parser                 json
    read_from_head         true

[OUTPUT]
    name                    loki
    match                   remote-api-uat-out_logs
    host                    <host-ip>
    port                    3100
    labels                  log=out_logs, service=remote-api, env=uat, host=remote-api-uat
    auto_kubernetes_labels  off
    workers                 2

[OUTPUT]
    name                    loki
    match                   remote-api-uat-error_logs
    host                    <host-ip>
    port                    3100
    labels                  log=error_logs, service=remote-api, env=uat, host=remote-api-uat
    auto_kubernetes_labels  off
    workers                 2

# system-logs
[INPUT]
    name                   tail
    tag                    sys_logs
    path                   /var/log/*log
    refresh_interval       5
    rotate_wait            30
    mem_buf_limit          100MB
    skip_long_lines        On
    parser                 json
    read_from_head         true

[OUTPUT]
    name                    loki
    match                   sys_logs
    host                    <host-ip>
    port                    3100
    labels                  log=sys_logs, service=remote-system-logs, host=remote-system-logs, ip=10.0.2.244
    auto_kubernetes_labels  off
    workers                 2